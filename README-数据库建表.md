# æ•°æ®åº“å»ºè¡¨è„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“‹ è„šæœ¬è¯´æ˜

æœ¬é¡¹ç›®æä¾›äº†å¤šç§æ–¹å¼æ¥è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œé€‚ç”¨äºä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œä½¿ç”¨åœºæ™¯ã€‚

## ğŸ—‚ï¸ æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶å | ç”¨é€” | é€‚ç”¨ç³»ç»Ÿ |
|--------|------|----------|
| `setup-database-tables.sql` | çº¯ SQL å»ºè¡¨è„šæœ¬ | æ‰€æœ‰ç³»ç»Ÿ |
| `run-database-setup.sh` | Linux/macOS è‡ªåŠ¨åŒ–è„šæœ¬ | Linux/macOS |
| `run-database-setup.bat` | Windows è‡ªåŠ¨åŒ–è„šæœ¬ | Windows |

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æ–¹å¼ä¸€ï¼šç›´æ¥æ‰§è¡Œ SQL è„šæœ¬

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ mysql å‘½ä»¤è¡Œ
mysql -uç”¨æˆ·å -på¯†ç  -hä¸»æœº -Pç«¯å£ < setup-database-tables.sql

# æ–¹æ³•2ï¼šåœ¨ MySQL å®¢æˆ·ç«¯ä¸­æ‰§è¡Œ
mysql> source setup-database-tables.sql;

# æ–¹æ³•3ï¼šä½¿ç”¨ Docker MySQL
docker exec -i mysqlå®¹å™¨å mysql -uç”¨æˆ·å -på¯†ç  < setup-database-tables.sql
```

### æ–¹å¼äºŒï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬

#### Linux/macOS ç³»ç»Ÿ
```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x run-database-setup.sh

# è¿è¡Œè„šæœ¬
./run-database-setup.sh
```

#### Windows ç³»ç»Ÿ
```cmd
# ç›´æ¥åŒå‡»è¿è¡Œæˆ–å‘½ä»¤è¡Œæ‰§è¡Œ
run-database-setup.bat
```

## ğŸ“Š åˆ›å»ºçš„è¡¨ç»“æ„

### 1. websites è¡¨ï¼ˆç½‘ç«™å¯¼èˆªæ•°æ®ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | BIGINT | ä¸»é”®IDï¼Œè‡ªå¢ |
| name | VARCHAR(255) | ç½‘ç«™åç§° |
| url | TEXT | ç½‘ç«™URL |
| description | TEXT | ç½‘ç«™æè¿°ï¼ˆå¯é€‰ï¼‰ |
| custom_icon_path | VARCHAR(500) | è‡ªå®šä¹‰å›¾æ ‡è·¯å¾„ï¼ˆå¯é€‰ï¼‰ |
| icon_type | ENUM | å›¾æ ‡ç±»å‹ï¼šFAVICON/CUSTOM/DEFAULT/AUTO_FETCHED/LIBRARY |
| sort_order | INT | æ’åºé¡ºåºï¼Œé»˜è®¤0 |
| is_active | BOOLEAN | æ˜¯å¦æ¿€æ´»ï¼Œé»˜è®¤TRUE |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ |

### 2. admin_sessions è¡¨ï¼ˆç®¡ç†å‘˜ä¼šè¯ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | VARCHAR(255) | ä¼šè¯IDï¼Œä¸»é”® |
| token | VARCHAR(255) | ä¼šè¯ä»¤ç‰Œï¼Œå”¯ä¸€ |
| expires_at | TIMESTAMP | è¿‡æœŸæ—¶é—´ |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |

## ğŸ¯ åˆ›å»ºçš„ç´¢å¼•

- `websites` è¡¨ç´¢å¼•ï¼š
  - ä¸»é”®ç´¢å¼•ï¼š`id`
  - å•åˆ—ç´¢å¼•ï¼š`is_active`, `sort_order`, `icon_type`, `created_at`
  - å¤åˆç´¢å¼•ï¼š`(is_active, sort_order)`

- `admin_sessions` è¡¨ç´¢å¼•ï¼š
  - ä¸»é”®ç´¢å¼•ï¼š`id`
  - å”¯ä¸€ç´¢å¼•ï¼š`token`
  - å•åˆ—ç´¢å¼•ï¼š`expires_at`
  - å¤åˆç´¢å¼•ï¼š`(token, expires_at)`

## ğŸ“ ç¤ºä¾‹æ•°æ®

è„šæœ¬ä¼šè‡ªåŠ¨æ’å…¥5æ¡ç¤ºä¾‹ç½‘ç«™æ•°æ®ï¼š
1. Google - æœç´¢å¼•æ“
2. GitHub - ä»£ç æ‰˜ç®¡å¹³å°
3. Stack Overflow - ç¨‹åºå‘˜é—®ç­”ç¤¾åŒº
4. MDN Web Docs - Web å¼€å‘æ–‡æ¡£
5. npm - Node.js åŒ…ç®¡ç†å™¨

## âš™ï¸ ç¯å¢ƒè¦æ±‚

### å¿…éœ€ç»„ä»¶
- MySQL 8.0+ æ•°æ®åº“æœåŠ¡
- MySQL å®¢æˆ·ç«¯å·¥å…·

### æƒé™è¦æ±‚
æ•°æ®åº“ç”¨æˆ·éœ€è¦ä»¥ä¸‹æƒé™ï¼š
- `CREATE` - åˆ›å»ºæ•°æ®åº“å’Œè¡¨
- `INSERT` - æ’å…¥ç¤ºä¾‹æ•°æ®
- `SELECT` - æŸ¥è¯¢éªŒè¯
- `DROP` - åˆ é™¤æ—§è¡¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

## ğŸ”§ é…ç½®è¯´æ˜

### é»˜è®¤é…ç½®
- æ•°æ®åº“ä¸»æœºï¼š`localhost`
- æ•°æ®åº“ç«¯å£ï¼š`3306`
- æ•°æ®åº“ç”¨æˆ·ï¼š`root`
- æ•°æ®åº“åç§°ï¼š`navigation`
- å­—ç¬¦é›†ï¼š`utf8mb4_unicode_ci`

### Docker ç¯å¢ƒ
å¦‚æœä½¿ç”¨ Docker éƒ¨ç½²ï¼Œç¡®ä¿ï¼š
1. MySQL å®¹å™¨æ­£åœ¨è¿è¡Œ
2. ç«¯å£æ˜ å°„æ­£ç¡®ï¼ˆé»˜è®¤3306ï¼‰
3. ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®

```bash
# æ£€æŸ¥ Docker å®¹å™¨çŠ¶æ€
docker ps | grep mysql

# è¿›å…¥å®¹å™¨æ‰§è¡Œè„šæœ¬
docker exec -i å®¹å™¨å mysql -uroot -på¯†ç  < setup-database-tables.sql
```

## â— æ³¨æ„äº‹é¡¹

1. **æ•°æ®å¤‡ä»½**ï¼šè„šæœ¬ä¼šåˆ é™¤å·²å­˜åœ¨çš„åŒåè¡¨ï¼Œæ‰§è¡Œå‰è¯·å¤‡ä»½é‡è¦æ•°æ®
2. **æƒé™æ£€æŸ¥**ï¼šç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™
3. **è¿æ¥æµ‹è¯•**ï¼šå»ºè®®å…ˆæµ‹è¯•æ•°æ®åº“è¿æ¥å†æ‰§è¡Œè„šæœ¬
4. **å­—ç¬¦ç¼–ç **ï¼šç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å­—ç¬¦ç¼–ç ä¸€è‡´
5. **é˜²ç«å¢™**ï¼šæ£€æŸ¥æ•°æ®åº“ç«¯å£æ˜¯å¦è¢«é˜²ç«å¢™é˜»æ­¢

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯

1. **è¿æ¥å¤±è´¥**
   ```
   ERROR 2003 (HY000): Can't connect to MySQL server
   ```
   - æ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦å¯åŠ¨
   - éªŒè¯ä¸»æœºåå’Œç«¯å£
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

2. **æƒé™ä¸è¶³**
   ```
   ERROR 1044 (42000): Access denied for user
   ```
   - ç¡®è®¤ç”¨æˆ·æƒé™
   - ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·æ‰§è¡Œ

3. **å­—ç¬¦ç¼–ç é—®é¢˜**
   ```
   ERROR 1366 (HY000): Incorrect string value
   ```
   - æ£€æŸ¥å®¢æˆ·ç«¯å­—ç¬¦ç¼–ç è®¾ç½®
   - ç¡®è®¤æ•°æ®åº“å­—ç¬¦é›†é…ç½®

### éªŒè¯å®‰è£…

æ‰§è¡Œä»¥ä¸‹ SQL éªŒè¯è¡¨åˆ›å»ºæˆåŠŸï¼š

```sql
-- æ£€æŸ¥è¡¨æ˜¯å¦å­˜åœ¨
SHOW TABLES;

-- æ£€æŸ¥è¡¨ç»“æ„
DESCRIBE websites;
DESCRIBE admin_sessions;

-- æ£€æŸ¥ç¤ºä¾‹æ•°æ®
SELECT COUNT(*) FROM websites;
SELECT name, url FROM websites ORDER BY sort_order;
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. MySQL æœåŠ¡çŠ¶æ€
2. ç½‘ç»œè¿æ¥
3. ç”¨æˆ·æƒé™
4. æ—¥å¿—æ–‡ä»¶

å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒå…ˆéªŒè¯è„šæœ¬ï¼Œç¡®è®¤æ— è¯¯åå†åœ¨ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œã€‚
